/* =========================
   FusionBots Chat Styles (scoped)
   - Desktop: compact FAB
   - Mobile: circular icon only, to the LEFT of Upcoming Events (bottom-right)
   - Smooth autohide after decent scroll (paired with .fb-hidden in JSX)
   ========================= */

:root{
  /* Desktop/tablet placement: sit left of Events button (tweak as needed) */
  --events-offset: 230px;              /* smaller => closer to right edge */
  --desktop-bottom: 18px;

  /* Mobile horizontal side-by-side layout (right edge has Events, chat sits to its left) */
  --mobile-edge: 16px;                 /* padding from screen edges */
  --events-width: 170px;               /* â‰ˆ width of your Upcoming Events button on mobile */
  --side-gap: 12px;                    /* space between chat and Events button */
}

/* ---------------- Base placement (desktop/tablet) ---------------- */
.fb-root{
  position: fixed;
  right: var(--events-offset);
  bottom: var(--desktop-bottom);
  z-index: 2147483000;
  transition:
    opacity .32s cubic-bezier(.2,.7,.2,1),
    transform .32s cubic-bezier(.2,.7,.2,1),
    filter .32s cubic-bezier(.2,.7,.2,1);
  will-change: transform, opacity, filter;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
}

/* Animated autohide on scroll (.fb-hidden toggled in JSX) */
.fb-root.fb-hidden{
  opacity: 0;
  transform: translateY(20px) scale(.97);
  filter: blur(6px);
  pointer-events: none;
}

/* ---------------- Compact FAB (desktop/tablet) ---------------- */
.fb-root .fb-fab{
  display:flex; align-items:center; gap:8px;
  height:42px;
  padding:0 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.15);
  background:rgba(20,22,28,.92);
  backdrop-filter:blur(8px);
  color:#fff; cursor:pointer;
  box-shadow:0 10px 30px rgba(20,20,40,.35);
  transition:transform .18s ease;
  z-index:2147483001;
}
.fb-root .fb-fab:hover{ transform:translateY(-1px); }
.fb-root .fb-fab:active{ transform:translateY(0); }

.fb-root .fb-fab-icon{
  display:grid; place-items:center;
  width:24px; height:24px;
  border-radius:999px;
  border:1px solid rgba(132,90,255,.45);
  background:linear-gradient(180deg, rgba(55,0,255,.25), rgba(150,0,255,.15));
  font-size:14px; line-height:1;
}
.fb-root .fb-fab-title{ font-weight:700; font-size:12px; line-height:1; }
.fb-root .fb-fab-sub{ font-size:10px; opacity:.7; }

/* ---------------- Panel ---------------- */
.fb-root .fb-panel{
  margin-top:10px;
  width:min(90vw, 340px);
  height:min(65vh, 560px);
  display:grid; grid-template-rows:auto 1fr auto;
  border-radius:16px; overflow:hidden;
  border:1px solid rgba(255,255,255,.12);
  background:
    radial-gradient(1200px 500px at 80% -50%, rgba(120,119,198,.18), transparent 60%),
    radial-gradient(1000px 400px at 20% 120%, rgba(0,212,255,.15), transparent 55%),
    rgba(12,14,20,.95);
  backdrop-filter:blur(10px);
  box-shadow:0 20px 50px rgba(16,16,40,.6);
  z-index:2147483002;
}

/* Header */
.fb-root .fb-header{ display:flex; align-items:center; justify-content:space-between; padding:8px 10px; border-bottom:1px solid rgba(255,255,255,.1); }
.fb-root .fb-header-left{ display:flex; align-items:center; gap:8px; color:#fff; }
.fb-root .fb-logo{ width:28px; height:28px; border-radius:10px; display:grid; place-items:center; border:1px solid rgba(132,90,255,.4); background:linear-gradient(180deg, rgba(55,0,255,.25), rgba(150,0,255,.15)); font-size:14px; }
.fb-root .fb-header-title{ font-size:13px; font-weight:700; }
.fb-root .fb-header-sub{ font-size:10px; opacity:.7; }
.fb-root .fb-close{ color:#fff; opacity:.7; background:transparent; border:0; cursor:pointer; font-size:16px; }
.fb-root .fb-close:hover{ opacity:1; }

/* Messages */
.fb-root .fb-messages{ padding:8px; overflow-y:auto; display:flex; flex-direction:column; gap:6px; }
.fb-root .fb-bubble{ max-width:85%; padding:7px 9px; border-radius:12px; font-size:13px; color:#fff; word-wrap:break-word; white-space:pre-wrap; }
.fb-root .fb-bubble.bot{ background:rgba(20,20,28,.9); border:1px solid rgba(132,90,255,.25); }
.fb-root .fb-bubble.me{ background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); margin-left:auto; }
.fb-root .fb-link{ color:#d2d9ff; text-decoration:underline; }
.fb-root .fb-error{ color:#ffb4b4; font-size:12px; padding:2px 6px; }

/* Suggestions */
.fb-root .fb-suggestions{ padding:6px 4px; }
.fb-root .fb-suggest-label{ color:rgba(255,255,255,.7); font-size:10px; margin-bottom:6px; }
.fb-root .fb-suggest-list{ display:flex; flex-wrap:wrap; gap:6px; }
.fb-root .fb-suggest{ font-size:11px; color:#fff; background:rgba(34,37,48,.7); border:1px solid rgba(132,90,255,.35); border-radius:999px; padding:5px 9px; cursor:pointer; }
.fb-root .fb-suggest:hover{ background:rgba(34,37,48,.9); }

/* Input bar */
.fb-root .fb-inputbar{ display:grid; grid-template-columns:1fr auto; gap:6px; border-top:1px solid rgba(255,255,255,.1); padding:8px; }
.fb-root .fb-textarea{ resize:none; min-height:36px; max-height:110px; background:rgba(20,20,28,.85); border:1px solid rgba(255,255,255,.12); border-radius:10px; color:#fff; padding:7px 9px; outline:none; font-size:13px; }
.fb-root .fb-textarea:focus{ border-color:rgba(200,200,255,.35); }
.fb-root .fb-send{ padding:0 12px; border-radius:10px; border:0; color:#fff; cursor:pointer; background:linear-gradient(135deg,#645cff,#8a5cf7,#5ec8ff); transition:filter .15s ease; height:36px; font-size:13px; font-weight:600; }
.fb-root .fb-send:disabled{ filter:grayscale(.6); cursor:not-allowed; }

/* ---------------- Mobile layout ----------------
   Chat sits to the LEFT of the bottom-right Upcoming Events button
   - Chat: small circle (icon-only), perfectly centered, aligned bottom
   - No overlap, no cutoff
------------------------------------------------- */
@media (max-width: 768px){
  /* Position chat to the LEFT of Events: 
     Events sits at right: var(--mobile-edge);
     Chat sits at right: (Events width + gap + edge)  */
  .fb-root{
    right: calc(var(--mobile-edge) + var(--events-width) + var(--side-gap));
    bottom: var(--mobile-edge);
  }

  /* Circle FAB: icon-only and perfectly centered */
  .fb-root .fb-fab{
    height: 52px;
    width: 52px;
    padding: 0;
    border-radius: 999px;
    justify-content: center;
    align-items: center;
    display: inline-flex;
  }
  .fb-root .fb-fab-icon{
    width: 28px; height: 28px;
    font-size: 18px; line-height: 1;
    display: grid; place-items: center; /* center emoji perfectly */
    border-radius: 999px;               /* keep lil' inner pill look */
  }
  /* Hide text wrapper entirely so it stays icon-only on mobile */
  .fb-root .fb-fab-text{ display: none; }

  /* Panel size a bit tighter on phones */
  .fb-root .fb-panel{
    width: min(92vw, 330px);
    height: min(62vh, 520px);
  }
}
